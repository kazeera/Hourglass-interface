<UploadTable>
    GridLayout:
        cols: 1
        size: root.width, root.height

        GridLayout:
            cols: 2
            size: root.width, root.height

            Label:
                id: datasetName
                text: 'Name of Dataset'

            TextInput:
                multiline: False
                hint_text: 'Enter Text Here'

            Label:
                text: 'Numeric Matrix'

            Button:
                id: NumMatButton
                text: 'Upload File'
                on_press: root.popup_opener()
                on_release: root.button_changer('NumMatButton')

            Label:
                text: 'Row Annotations'

            Button:
                id: RowAnnButton
                text: 'Upload File'
                on_press: root.popup_opener()
                on_release: root.button_changer('RowAnnButton')

            Label:
                text: 'Column Annotations'

            Button:
                id: ColAnnButton
                text: 'Upload File'
                on_press: root.popup_opener()
                on_release: root.button_changer('ColAnnButton')

        Button:
            text: 'Upload'

<ComparisonTable>:
	GridLayout:
		cols:1

		ScrollView:
			GridLayout:
				id: container
				cols: 1
				size_hint_y: None
				height: self.minimum_height
				row_force_default: True
				row_default_height: dp(26)
        GridLayout:
            cols:2
		    Button:
			    text: "Add a Comparison (row)"
			    on_release: root.add_a_row()
            Button:
			    text: "Add filter"

<ComparisonTableRow>:
    orientation: "horizontal"

    TextInput:
        hint_text: "MainComparison"
    TextInput:
        hint_text: "Subgroup"
    Button:
        text: "+Filter"
    Button:
        text: "-"

<AdvancedOptions>
    GridLayout:
        cols: 1
        size: root.width, root.height

        GridLayout:
            cols: 2

            Label:
                id: correlation_label
                text: 'Correlation Method'

            Spinner:
                id: correlation_spinner
                text: 'pearson'
                values: ["pearson", "kendall", "spearman"]
                on_text: root.correlation_clicked(correlation_spinner.text)

            Label:
                id: pvaltest_label
                text: 'Test Method'

            Spinner:
                id: pvaltest_spinner
                text: 't.test'
                values: ["t.test", "wilcox"]
                on_text: root.pvaltest_clicked(pvaltest_spinner.text)

            Label:
                id: pvallabel_label
                text: 'P-values Label'

            Spinner:
                id: pvallabel_spinner
                text: 'stars'
                values: ["stars", "numbers"]
                on_text: root.pvallabel_clicked(pvallabel_spinner.text)

            CheckBox:
                id: do_survival_analysis
                active: False

            Label:
                text_size: self.size
                halign: 'left'
                text: 'Run survival analysis - pick columns from row annotations:'

            Label:
                text_size: self.size
                halign: 'right'
                text: 'Survival time column:'

            Spinner:
                text: 'Select'
                values: ["Smoker", "Age", "Survival.Time", "OS.Status"] #TODO populate with column names of row annotations

            Label:
                text_size: self.size
                halign: 'right'
                text: 'Censoring status (1=censored, 2=dead) column:'

            Spinner:
                text: 'Select'
                values: ["Smoker", "Age", "Survival.Time", "OS.Status"] #TODO populate with column names of row annotations

        GridLayout:
            cols: 3
            CheckBox:
                id: do_impute
                active: True

            Label:
                text: 'Run imputed version in parallel - impute NAs % around mean = '

            TextInput:
                id: impute_with_mean
                multiline: False
                hint_text: 'Enter number between 0 and 100 here (inclusive). Default: 5'

<KVTabLay>
    TabbedPanel:
        size: root.width, root.height
        do_default_tab: False
        tab_width: 300
        tab_height: 75

        TabbedPanelItem:
            text: 'Upload Data'
            UploadTable:

        TabbedPanelItem:
            text: 'Pick Comparisons'
            ComparisonTable:

        TabbedPanelItem:
            text: 'Make Groups'

        TabbedPanelItem:
            text: 'Customize Colours'

        TabbedPanelItem:
            text: 'Advanced Options'
            AdvancedOptions:

        TabbedPanelItem:
            text: 'Data Explorer'
		
        TabbedPanelItem:
            text: 'Run Hourglass'

<FileChooserPopup>

    id: FileChooserPopup

    FileChooserIconView:
        id: FileChooser
        pos_hint: {'x':0,'y':0}

        on_selection: FileChooserPopup.selected(FileChooser.selection)